---
id: s3
title: S3
---

import '../src/css/notices.css';
import { CgDanger } from 'react-icons/cg';
export const Notice = ({children, type, title}) => (
  <div class={`notice ${type}`}>
  <p>
  <span class="span-notice">
  <CgDanger/> {title}
  </span>
  </p>
  {children}
  </div>
);

## Almacenamiento de archivos

### `[POST]` Subir archivo del S3

> `/api/uploads`

> Authorization: Superadmin, Lawyer, Owner

> Content-Type: : application/json


Permite obtener una url prefirmada para subir un archivo al almacenamiento del S3.

> Request

```javascript
{
  type: 'application/pdf',
  prefix: 'materials'
}
```

> Response: 200 Ok

```javascript
{
  key: '0LVxTDAum5APMcmuo7fjX',
  url: 'https://linea-legal-test.sfo3.digitaloceanspaces.com/uploads/materials/0LVxTDAum5APMcmuo7fjX?Content-Type=application%2Fpdf&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=PGYITQNR6KBVLZWCKQQI%2F20210722%2Fsfo3%2Fs3%2Faws4_request&X-Amz-Date=20210722T172923Z&X-Amz-Expires=300&X-Amz-Signature=3590a6c350e36b344fc4b5531d3547d4b5a28d242f5c8f1bd76ab6a36f666b3e&X-Amz-SignedHeaders=host%3Bx-amz-acl&x-amz-acl=private'
}
```

#### Flujo exitoso

1. Obtiene una url prefirmada para cargar el archivo.

### `[GET]` Obtener archivo del S3

> `/api/uploads`

> Authorization: Superadmin, Lawyer, Owner

> Content-Type: : application/json


Permite obtener una url prefirmada para subir un archivo al almacenamiento del S3.

> Request

```javascript
{
  type: 'application/pdf',
  prefix: 'materials'
}
```

> Response: 200 Ok

```javascript
{
  key: '0LVxTDAum5APMcmuo7fjX',
  url: 'https://linea-legal-test.sfo3.digitaloceanspaces.com/uploads/materials/0LVxTDAum5APMcmuo7fjX?Content-Type=application%2Fpdf&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=PGYITQNR6KBVLZWCKQQI%2F20210722%2Fsfo3%2Fs3%2Faws4_request&X-Amz-Date=20210722T172923Z&X-Amz-Expires=300&X-Amz-Signature=3590a6c350e36b344fc4b5531d3547d4b5a28d242f5c8f1bd76ab6a36f666b3e&X-Amz-SignedHeaders=host%3Bx-amz-acl&x-amz-acl=private'
}
```

#### Flujo exitoso

1. Obtiene una url prefirmada para cargar el archivo.

:::info
Se debe agregar el header 'x-amz-acl': 'private' o 'public-read' a la petici√≥n de subida, debido a restricciones del proveedor actual de almacenamiento.
:::